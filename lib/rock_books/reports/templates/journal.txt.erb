<% totals = data[:totals] %>
<%= banner_line %>
<%= center(context.entity || 'Unspecified Entity') %>
<%= center(title) %>
<% if data[:code] && data[:name] -%>
<%= center("Account: #{data[:name]} (#{data[:code]})") %>
<% end -%>
<% if data[:short_name] -%>
<%= center("Journal Short Name: #{data[:short_name]}") %>
<% end -%>
<%= center("#{start_date} to #{end_date}"
) %>
<%= banner_line %>


<% data[:entries].each do |entry| -%>
<%= format_entry(entry) %>
<% end %>


Totals
------

<% totals.keys.sort.each do |acct_code| -%>
<%= sprintf(line_item_format_string, totals[acct_code], acct_code, acct_name(acct_code)) %>
<% end -%>
------------
<%= total_with_ok_or_discrepancy(data[:grand_total])  %>
